1.打开终端初始化包管理配置文件
npm init -y,对象中写入"type": "module"使用ES6模块化

2.安装包
npm i express@4.17.1 mysql2@2.2.5

3.创建基本的服务器（app.js）
// 从express包里导入express方法
import express from 'express'
// 调用方法，返回值是一个服务器实例
const app = express()
app.listen(80, () => {
    console.log("服务器运行在http://127.0.0.1")
})

4.创建db数据库操作，创建db文件夹，创建index.js文件

import mysql from 'mysql2'
const pool = mysql.createPool({
    host: '127.0.0.1',
    port: 3306,
    database: 'api_db',
    user: 'root',
    password: 'admin123'
})
export default pool.promise()


5.创建handler文件夹，创建handler函数文件，导入数据库db文件，操作数据库得到数据

import db from '../db/index.js'
async function getAllUser(req, res) {
    const [rows] = await db.query('select id,username,nickname from ev_users')
    res.send({
        status: 0,
        message: '获取用户列表成功',
        data: rows
    })
}

6.创建router文件夹，定义router文件，调用handler里的方法

import express from 'express';
import { getAllUser } from '../router_handler/getUser.js'
const router = new express.Router()
router.get('/user', getAllUser)
export default router

7.app.js中导入router文件，app,use()调用路由文件，结束

import express from 'express'
import userRouter from './router/user_router.js'
const app = express()
app.listen(80, () => {
    console.log("服务器运行在http://127.0.0.1")
})
app.use('/api', userRouter)

整体顺序：
1.db文件夹createPool连接数据库
2.handler文件夹定义handler处理函数
3.router文件夹定义路由调用handler处理函数
4.app.js导入路由并挂载app.use()